<header class="sticky top-0 z-50 bg-[#1F1F1F] shadow-md">
    <%- include('../../views/partials/user/header')%>
</header>

<body class="bg-[#1A1A1A] text-gray-200">
    <div class="flex flex-col md:flex-row min-h-screen">
        <div class="w-full md:w-64 bg-[#1F1F1F] p-6 md:sticky md:top-16 md:h-[calc(100vh-4rem)]">
            <h2 class="text-xl font-bold mb-6 text-[#88903F] border-b border-[#333] pb-4">SETTINGS</h2>
            <ul class="space-y-3">
                <li>
                    <a href="/profile" class="flex items-center p-2 rounded-lg hover:bg-[#333] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                        </svg>
                        Personal Info
                    </a>
                </li>
                <li>
                    <a href="/orders" class="flex items-center p-2 rounded-lg hover:bg-[#333] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2" />
                        </svg>
                        Orders
                    </a>
                </li>
                <li>
                    <a href="/address" class="flex items-center p-2 rounded-lg ">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
                        </svg>
                        Address
                    </a>
                </li>
                <li>
                    <a href="/wallet" class="flex items-center p-2 rounded-lg hover:bg-[#333] transition-colors bg-[#333] text-[#88903F]">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        Wallet
                    </a>
                </li>
                <li>
                    <a href="/referrals" class="flex items-center p-2 rounded-lg hover:bg-[#333] transition-colors">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        Referrals
                    </a>
                </li>
            </ul>
            <div class="mt-10 border-t border-[#333] pt-6">
                <% if (!userDatas || Object.keys(userDatas).length===0) { %>
                    <a href="/login" class="block w-full bg-[#88903F] hover:bg-[#a0a84f] text-white py-2 px-4 rounded-lg text-center transition-colors">
                        Login
                    </a>
                <% } else { %>
                    <a href="/logout" class="block w-full bg-[#333] hover:bg-[#444] text-white py-2 px-4 rounded-lg text-center transition-colors">
                        Logout
                    </a>
                <% } %>
            </div>
            
        </div>

       <!-- In your wallet.ejs file -->
<div class="flex-1 p-6 md:p-8">
    <div class="max-w-4xl mx-auto bg-[#1F1F1F] rounded-xl shadow-lg overflow-hidden mb-8 border border-[#333]">
        <div class="p-6 md:p-8">
            <div class="flex justify-between items-center mb-6">
                <h1 class="text-2xl md:text-3xl font-bold text-white">My Wallet</h1>
                <span class="bg-[#88903F] text-white text-xs font-medium px-3 py-1 rounded-full">
                    <%= wallet.status.toUpperCase() %>
                </span>
            </div>
            
            <div class="bg-gradient-to-r from-[#1F1F1F] to-[#333] rounded-lg p-6 text-white mb-6 border border-[#333]">
                <p class="text-sm text-gray-400 mb-1">Available Balance</p>
                <div class="flex items-end justify-between">
                    <h2 class="text-3xl md:text-4xl font-bold">
                        â‚¹<%= wallet.balance.toFixed(2) %>
                    </h2>
                    <div class="flex space-x-2">
                        <button class="p-2 bg-[#333] rounded-full hover:bg-[#444] transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                            </svg>
                        </button>
                        <button class="p-2 bg-[#333] rounded-full hover:bg-[#444] transition">
                            <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-11a1 1 0 10-2 0v2H7a1 1 0 100 2h2v2a1 1 0 102 0v-2h2a1 1 0 100-2h-2V7z" clip-rule="evenodd" />
                            </svg>
                        </button>
                    </div>
                </div>
                <p class="text-xs text-gray-500 mt-2">
                    Last updated: <%= new Date(wallet.updatedAt || wallet.createdAt).toLocaleString() %>
                </p>
            </div>
            
           
        </div>
    </div>
    
    <div class="max-w-4xl mx-auto bg-[#1F1F1F] rounded-xl shadow-lg overflow-hidden border border-[#333]">
        <div class="p-6 md:p-8">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-xl font-bold text-white">
                    <%= showAllTransactions ? 'All Transactions' : 'Recent Transactions' %>
                </h2>
                <% if (wallet.hasMoreTransactions && !showAllTransactions) { %>
                    <a href="/wallet/all-transactions" class="text-sm text-[#88903F] hover:text-[#a0a84f] hover:underline flex items-center">
                        View All
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 ml-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z" clip-rule="evenodd" />
                        </svg>
                    </a>
                <% } else if (showAllTransactions) { %>
                    <a href="/wallet" class="text-sm text-[#88903F] hover:text-[#a0a84f] hover:underline flex items-center">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4 mr-1" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd" />
                        </svg>
                        Back to Recent
                    </a>
                <% } %>
            </div>
            
            <div class="space-y-4">
                <% if (totalTransactions > 0) { %>
                    <% if (showAllTransactions) { %>
                        <div class="text-center text-sm text-gray-400 mb-4">
                            Showing all <%= totalTransactions %> transactions
                        </div>
                    <% } %>
                    
                    <% 
                    const transactionsToShow = showAllTransactions ? wallet.transactions : wallet.recentTransactions; 
                    %>
                    
                    <% transactionsToShow.forEach(transaction => { %>
                        <div class="flex items-center justify-between p-4 hover:bg-[#333] rounded-lg transition border border-[#333]">
                            <div class="flex items-center">
                                <div class="bg-[#333] p-3 rounded-full mr-4">
                                    <% if (transaction.type === 'deposit') { %>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z" clip-rule="evenodd" />
                                        </svg>
                                    <% } else if (transaction.type === 'withdrawal' || transaction.type === 'payment') { %>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-red-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path d="M11 17a1 1 0 001.447.894l4-2A1 1 0 0017 15V9.236a1 1 0 00-1.447-.894l-4 2a1 1 0 00-.553.894V17zM15.211 6.276a1 1 0 000-1.788l-4.764-2.382a1 1 0 00-.894 0L4.789 4.488a1 1 0 000 1.788l4.764 2.382a1 1 0 00.894 0l4.764-2.382zM4.447 8.342A1 1 0 003 9.236V15a1 1 0 00.553.894l4 2A1 1 0 009 17v-5.764a1 1 0 00-.553-.894l-4-2z" />
                                        </svg>
                                    <% } else if (transaction.type === 'refund') { %>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M5 2a2 2 0 00-2 2v14l3.5-2 3.5 2 3.5-2 3.5 2V4a2 2 0 00-2-2H5zm4.707 3.707a1 1 0 00-1.414-1.414l-3 3a1 1 0 000 1.414l3 3a1 1 0 001.414-1.414L8.414 9H10a3 3 0 013 3v1a1 1 0 102 0v-1a5 5 0 00-5-5H8.414l1.293-1.293z" clip-rule="evenodd" />
                                        </svg>
                                    <% } else { %>
                                        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 text-blue-400" viewBox="0 0 20 20" fill="currentColor">
                                            <path fill-rule="evenodd" d="M4 4a2 2 0 00-2 2v4a2 2 0 002 2V6h10a2 2 0 00-2-2H4zm2 6a2 2 0 012-2h8a2 2 0 012 2v4a2 2 0 01-2 2H8a2 2 0 01-2-2v-4zm6 4a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" />
                                        </svg>
                                    <% } %>
                                </div>
                                <div>
                                    <h3 class="font-medium text-white">
                                        <%= transaction.description %>
                                        <% if (transaction.counterparty) { %>
                                            to <%= transaction.counterparty %>
                                        <% } %>
                                    </h3>
                                    <p class="text-sm text-gray-400">
                                        <%= new Date(transaction.date).toLocaleString() %>
                                    </p>
                                </div>
                            </div>
                            <div class="text-right">
                                <p class="font-medium <%= transaction.type === 'deposit' || transaction.type ==='refund' || transaction.type === 'referal' ? 'text-green-400' : 'text-red-400' %>">
                                    <%= (transaction.type === 'deposit' || transaction.type === 'refund' || transaction.type === 'referal' ) ? '+' : '-' %><%= wallet.currency %> <%= transaction.amount.toFixed(2) %>
                                </p>
                                <p class="text-xs text-gray-500">
                                    <%= transaction.status.charAt(0).toUpperCase() + transaction.status.slice(1) %>
                                </p>
                            </div>
                        </div>
                    <% }); %>
                    
                    <% if (!showAllTransactions && wallet.hasMoreTransactions) { %>
                        <div class="text-center mt-6">
                            <a href="/wallet/all-transactions" class="inline-block px-4 py-2 bg-[#333] hover:bg-[#444] text-[#88903F] rounded-lg transition-colors">
                                View All <%= totalTransactions %> Transactions
                            </a>
                        </div>
                    <% } %>
                <% } else { %>
                    <div class="text-center py-8 text-gray-400">
                        No transactions yet
                    </div>
                <% } %>
            </div>
        </div>
    </div>
</div>
    </div>

    <script src="https://cdn.tailwindcss.com"></script>
</body>